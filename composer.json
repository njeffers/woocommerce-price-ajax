{
    "name": "wordpress-shuttle/wordpress-shuttle",
    "type": "wordpress-theme",
    "authors": [
        {
            "name": "njeffers",
            "email": "nicksk888@gmail.com"
        }
    ],
    "config": {
        "vendor-dir": "includes/vendor"
    },
    "repositories": {
        "redux-vendor-support": {
            "type": "vcs",
            "url": "https://github.com/WebsitesDepot/redux-vendor-support"
        },
        "cmb2-attached-posts": {
            "type": "vcs",
            "url": "https://github.com/njeffers/cmb2-attached-posts"
        }
    },
    "require": {
        "redux-framework/redux-framework": "^3.6",
        "redux-framework/redux-vendor-support": "dev-master",
        "cmb2/cmb2": "^2.3",
        "webdevstudios/cmb2-attached-posts": "dev-master",
        "yahnis-elsts/plugin-update-checker": "dev-master",
        "stackadroit/cmb2-extensions": "dev-master"
    },
    "extra": {
        "installer-paths": {
            "includes/vendor/{$name}": [
                "redux-framework/redux-framework",
                "redux-framework/redux-vendor-support",
                "cmb2/cmb2",
                "webdevstudios/cmb2-attached-posts",
                "stackadroit/cmb2-extensions",
                "yahnis-elsts/plugin-update-checker"
            ]
        }
    },

    "scripts": {

        "docker-up": [
            "docker-compose up -d"
        ],


        "install-wp": [
            "docker-compose run --rm wp-cli install-wp"
        ],

        "kill-containers": [
            "docker stop $(docker ps -aq) && docker rm $(docker ps -aq)"
        ],

        "kill-remove-containers": [
            "docker stop $(docker ps -aq) && docker rm $(docker ps -aq) && docker rmi -f $(docker images -q)"
        ],

        "do-it": [
            "@docker-up",
            "echo 'Images are started. Lets give the environment some time to boot up. Care for a coffee?'",
            "sleep 60s",
            "docker-compose run --rm wp-cli install-wp"
        ],

        "wp-logs": [
            "docker-compose logs wordpress"
        ],

        "install-wp-test": [
            "docker-compose run --rm wp-cli wp scaffold theme-tests wordpress-shuttle --force",
            "docker-compose -f docker-compose.yml -f docker-compose.phpunit.yml up -d",
            "docker-compose -f docker-compose.phpunit.yml run --rm wordpress_phpunit /app/bin/install-wp-tests.sh wordpress_test root '' mysql_phpunit latest true",
            "@testdox"
        ],

        "testdox": [
            "docker-compose -f docker-compose.phpunit.yml run --rm wordpress_phpunit phpunit --testdox"
        ],



        "do-it-off": [
            "@docker-up",
            "docker-compose run --rm wp-cli install-wp",
            "sleep 60s",
            "docker-compose run --rm wp-cli install-wp --path=wordpress",
            "docker-compose run --rm wp-cli wp scaffold theme-tests wordpress-shuttle --force",
            "docker-compose -f docker-compose.yml -f docker-compose.phpunit.yml up -d",
            "docker-compose -f docker-compose.phpunit.yml run --rm wordpress_phpunit /app/bin/install-wp-tests.sh wordpress_test root '' mysql_phpunit latest true",
            "sleep 30s",
            "docker-compose -f docker-compose.phpunit.yml run --rm wordpress_phpunit phpunit"
        ],





        "post-install-cmd2": [
            "npm install --save-dev autoprefixer browser-sync css-mqpacker cssnano gulp gulp-concat gulp-deporder gulp-imagemin gulp-newer gulp-notify gulp-postcss gulp-sass gulp-shell gulp-strip-debug gulp-uglify gulp-util postcss-assets gulp-zip"
        ],
        "post-update-cmd2": [
            "npm update"
        ],
        "build": [
            "gulp build && gulp zip"
        ],
        "build-containers": [
            "docker-compose up -d"
        ],

        "build-wp": [
            "composer build-containers && sleep 10 && docker-compose run --rm wp-cli install-wp"
        ],
        "watch": [
            "gulp"
        ],
        "make-env": [
            "composer install && composer build-wp && composer watch"
        ],
        "test": [
            "vendor/bin/phpunit"
        ],

        "testdox2": [
            "vendor/bin/phpunit --testdox"
        ],
        "run-scaffolding": [
            "wp scaffold theme-tests wordpress-shuttle-child"
        ],
        "test-wp-setup": [
            "bash bin/install-wp-tests.sh wordpress_test root root 127.0.0.1:3306 latest"
        ],
        "phpcs": "phpcs --standard=phpcs.xml.dist",

        "do-it-old": [
            "@kill-containers",
            "docker-compose up -d",
            "docker cp wordpress_shuttle:/wordpress-shuttle/ .",
            "sleep 60s",
            "docker-compose run --rm wp-cli install-wp --path=wordpress",
            "docker-compose run --rm wp-cli wp scaffold theme-tests wordpress-shuttle --force",
            "docker-compose -f docker-compose.yml -f docker-compose.phpunit.yml up -d",
            "docker-compose -f docker-compose.phpunit.yml run --rm wordpress_phpunit /app/bin/install-wp-tests.sh wordpress_test root '' mysql_phpunit latest true",
            "docker-compose -f docker-compose.phpunit.yml run --rm wordpress_phpunit phpunit"
        ],

        "do-it-old2": [
            "docker-compose up -d",
            "docker cp wordpress_shuttle:/wordpress-shuttle/ .",
            "sleep 60s",
            "docker-compose run --rm wp-cli install-wp --path=wordpress",
            "docker-compose run --rm wp-cli wp scaffold theme-tests wordpress-shuttle --force",
            "docker-compose -f docker-compose.yml -f docker-compose.phpunit.yml up -d",
            "docker-compose -f docker-compose.phpunit.yml run --rm wordpress_phpunit /app/bin/install-wp-tests.sh wordpress_test root '' mysql_phpunit latest true",
            "sleep 30s",
            "docker-compose -f docker-compose.phpunit.yml run --rm wordpress_phpunit phpunit"
        ]



    }
}
